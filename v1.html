---
title: Calculator for Francis Tresham's Civilization Board Game
layout: markdown
isCurrent: false
githubPath: tree/v1-gwt
appurl: http://app1.civbuddy.org
---

<blockquote>This page is about {{ site.name }} version 1, which has been superseded by
<a href="{{ site.baseurl }}/">version 2</a>.
</blockquote>

## {{ site.name }} v1

Feature-wise, v1 already had most of what v2 can do, but the UI was very different:

[![Variants]({{ site.baseurl }}/images/screenshots/screenshot-1_t.jpg)]({{ site.baseurl }}/images/screenshots/screenshot-1.png) [![Cards]({{ site.baseurl }}/images/screenshots/screenshot-2_t.jpg)]({{ site.baseurl }}/images/screenshots/screenshot-2.png) [![Funds]({{ site.baseurl }}/images/screenshots/screenshot-3_t.jpg)]({{ site.baseurl }}/images/screenshots/screenshot-3.png) [![Card Info]({{ site.baseurl }}/images/screenshots/screenshot-4_t.jpg)]({{ site.baseurl }}/images/screenshots/screenshot-4.png)

{{ site.name }} v1 is still deployed ([link]({{ page.appurl }})), but no longer maintained,
so you may see some parts of it start to fail.

## Development Setup

v1 is no longer maintained, but for completeness' sake, here is how to set it up for development.

### Building {{ site.name }} v1

In order to build {{ site.name }} v1 yourself, follow these steps:

 1. Make sure you have the prerequisites set up:
    - [Git](http://git-scm.com/)
    - [Java 6 SDK](http://www.oracle.com/technetwork/java/javase/downloads/java-archive-downloads-javase6-419409.html)
    - [Java 7 SDK](http://www.oracle.com/technetwork/java/javase/downloads/java-archive-downloads-javase7-521261.html) - Both
      Java 6 and 7 are required to build {{ site.name }}. This is because the build needs Java&nbsp;7, but GWT requires
      Java&nbsp;6.
    - [Chrome](http://www.google.com/chrome). Yes, development of a GWT program requires Chrome these days.
 1. Make sure that your environment variable `JAVA_HOME` points to the Java&nbsp;7 SDK, for example
   `C:\PROGRA~1\Java\jdk1.7.0_80` (Windows).
 1. `JAVA_HOME/bin` should be on the `PATH` as first entry. Run `java -version` to check that it's Java&nbsp;7.
 1. If you don't have a Gradle User Home yet, set it up by creating an empty directory called `.gradle` somewhere,
    for example `d:\.gradle` (Windows) or `~/.gradle` (Unix). Create an environment variable `GRADLE_USER_HOME`
    which points to this directory. This directory may grow quite large over time (mine is 8&nbsp;GB), because
    Gradle uses it to cache all its downloaded stuff.
 1. Create an empty text file in `GRADLE_USER_HOME` called *gradle.properties*. Inside, add the following lines:

        org.gradle.daemon=true
        civbuddy_jdk6_javac=C:/PROGRA~1/Java/jdk1.6.0_45/bin/javac.exe
        civbuddy_jdk6_javadoc=C:/PROGRA~1/Java/jdk1.6.0_45/bin/javadoc.exe

    The `civbuddy_jdk6_javac` must point to the Java&nbsp;6 compiler executable (adjust this depending on where
    you installed your Java&nbsp;6 SDK), and should not contain spaces. The same goes for `civbuddy_jdk6_javadoc`.
    The daemon setting is optional and may be left out if you so desire.
 1. Clone the {{ site.name }} repo by running on the command line:
 
        git clone https://github.com/{{ site.github }}.git

 1. `cd civbuddy`
 1. `gradlew build`
     This will take care of everything needed for a successful build of {{ site.name }}, including download and
     installation of Gradle.

### Running {{ site.name }} v1 locally

In order to run {{ site.name }} in development mode, follow these steps:

 1. Make sure that {{ site.name }} was built ok in accordance with the above.
 1. Now, run `gradlew jettyDraftWar`. The WAR file will be assembled and a Jetty application server started. Don't
    worry about any installation or configuration effort, that's all taken care of by Gradle. The build will appear
    suspended at a line something like this:
 
        > Building 83% > :jettyDraftWar > Running at http://localhost:8080/civbuddy

    which is good; it means your Jetty server is running fine. Just leave it at that.
 1. In a new shell, run `gradlew gwtSuperDev`.
    [Super Dev Mode](http://www.gwtproject.org/articles/superdevmode.html) is required these days in order to develop
    a GWT program. The original development mode which was based on browser plugins is no longer supported by GWT.
    The output should include a line something like
 
        The code server is ready at http://localhost:9876/

    and subsequently remain "stuck" like the previous call. This is good, it means Super Dev mode is up and running!
 1. Start Chrome and navigate to `http://localhost:8080/civbuddy`, the address at which your Jetty server is listening.
 1. From the Chrome menu, select *More tools* &rarr; *Developer Tools* or press
    <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>I</kbd> to call up the development environment. You can browse the sources,
    debug them, or view the application log from here.

The {{ site.name }} code as found on GitHub is IDE agnostic, so you may use your favorite IDE to edit the sources.
The IDE may run on a newer JDK; just make sure that the *project's* JDK is on version&nbsp;6. IDE specific control
files are never committed to git. In order to activate changes from your IDE in Super Dev Mode, press *Compile* on
the *Dev Mode On* bookmarklet as described in the [Super Dev Mode](http://www.gwtproject.org/articles/superdevmode.html)
docs.
